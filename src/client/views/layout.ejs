<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		  content="width=device-width, initial-scale=1.0">
	<title>Agora - A Hacker News Clone</title>
	<link rel="stylesheet"
		  href="/styles.css">
</head>

<body>
	<div class="header">
		<div class="container header-content">
			<a href="/">
				<span class="logo">A</span>
			</a>
			<span class="site-title">
				<b>Agora</b>
			</span>
			<span class="nav-links">
				<a href="/"
				   class="nav-link">Home</a>
				<a href="/urls"
				   class="nav-link">URLs</a>
				<a href="/questions"
				   class="nav-link">Questions</a>
				<a href="/post/new"
				   class="nav-link">Submit</a>
			</span>
			<span class="auth-links">
				<% if
				   (locals.user)
				   {
				   %>
					<span>Welcome, <%= user.username
							%></span> |
					<a href="/logout">Logout</a>
					<% }
					   else
					   {
					   %>
						<a href="/login">Login</a> |
						<a href="/register">Register</a>
						<% }
						   %>
			</span>
		</div>
	</div>

	<div class="container">
		<%- body
			%>
	</div>

	<script>
		// Simple function to handle voting without page reload
		function vote(type, id) {
			fetch(`/${type}/${id}/vote`, {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				}
			})
				.then(response => response.json())
				.then(data => {
					if (data.success) {
						const scoreElement = document.getElementById(`${type}-score-${id}`)
						const currentScore = parseInt(scoreElement.textContent)
						scoreElement.textContent = currentScore + data.score_change
					}
				})
				.catch(error => console.error('Error voting:', error))
		}
	</script>
</body>

</html>